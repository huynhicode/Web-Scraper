{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nimport axios from \"axios\";\n\nfunction scrape(req, res) {\n  if (req.method === \"POST\") {\n    const {\n      urls\n    } = req.body;\n    const cleanedUrls = urls.split(\",\").map(rawUrl => {\n      const url = rawUrl.trim(); // if (url.startsWith(\"http\")) {\n      //   return url;\n      // }\n      // return \"https://\".concat(url);\n\n      return url;\n    });\n    const promiseArray = cleanedUrls.map(url => axios(url));\n    const combinedPromise = Promise.allSettled(promiseArray);\n    combinedPromise.then(allResults => {\n      const formattedResponse = allResults.map((result, index) => {\n        var _result$value, _result$reason;\n\n        return {\n          url: cleanedUrls[index],\n          html: (_result$value = result.value) === null || _result$value === void 0 ? void 0 : _result$value.data,\n          error: (_result$reason = result.reason) === null || _result$reason === void 0 ? void 0 : _result$reason.message\n        };\n      });\n      res.status(200).json(formattedResponse);\n    });\n  }\n}\n\nexport default scrape;","map":{"version":3,"sources":["/Users/steph/Desktop/coding-challenge/pages/api/scrape.js"],"names":["axios","scrape","req","res","method","urls","body","cleanedUrls","split","map","rawUrl","url","trim","promiseArray","combinedPromise","Promise","allSettled","then","allResults","formattedResponse","result","index","html","value","data","error","reason","message","status","json"],"mappings":"AAAA;AACA,OAAOA,KAAP,MAAkB,OAAlB;;AAEA,SAASC,MAAT,CAAgBC,GAAhB,EAAqBC,GAArB,EAA0B;AACxB,MAAID,GAAG,CAACE,MAAJ,KAAe,MAAnB,EAA2B;AACzB,UAAM;AAAEC,MAAAA;AAAF,QAAWH,GAAG,CAACI,IAArB;AAEA,UAAMC,WAAW,GAAGF,IAAI,CAACG,KAAL,CAAW,GAAX,EAAgBC,GAAhB,CAAqBC,MAAD,IAAY;AAClD,YAAMC,GAAG,GAAGD,MAAM,CAACE,IAAP,EAAZ,CADkD,CAElD;AACA;AACA;AACA;;AACA,aAAOD,GAAP;AACD,KAPmB,CAApB;AASA,UAAME,YAAY,GAAGN,WAAW,CAACE,GAAZ,CAAiBE,GAAD,IAASX,KAAK,CAACW,GAAD,CAA9B,CAArB;AAEA,UAAMG,eAAe,GAAGC,OAAO,CAACC,UAAR,CAAmBH,YAAnB,CAAxB;AAEAC,IAAAA,eAAe,CAACG,IAAhB,CAAsBC,UAAD,IAAgB;AACnC,YAAMC,iBAAiB,GAAGD,UAAU,CAACT,GAAX,CAAe,CAACW,MAAD,EAASC,KAAT;AAAA;;AAAA,eAAoB;AAC3DV,UAAAA,GAAG,EAAEJ,WAAW,CAACc,KAAD,CAD2C;AAE3DC,UAAAA,IAAI,mBAAEF,MAAM,CAACG,KAAT,kDAAE,cAAcC,IAFuC;AAG3DC,UAAAA,KAAK,oBAAEL,MAAM,CAACM,MAAT,mDAAE,eAAeC;AAHqC,SAApB;AAAA,OAAf,CAA1B;AAKAxB,MAAAA,GAAG,CAACyB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBV,iBAArB;AACD,KAPD;AAQD;AACF;;AAED,eAAelB,MAAf","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nimport axios from \"axios\";\n\nfunction scrape(req, res) {\n  if (req.method === \"POST\") {\n    const { urls } = req.body;\n\n    const cleanedUrls = urls.split(\",\").map((rawUrl) => {\n      const url = rawUrl.trim();\n      // if (url.startsWith(\"http\")) {\n      //   return url;\n      // }\n      // return \"https://\".concat(url);\n      return url;\n    });\n\n    const promiseArray = cleanedUrls.map((url) => axios(url));\n\n    const combinedPromise = Promise.allSettled(promiseArray);\n\n    combinedPromise.then((allResults) => {\n      const formattedResponse = allResults.map((result, index) => ({\n        url: cleanedUrls[index],\n        html: result.value?.data,\n        error: result.reason?.message,\n      }));\n      res.status(200).json(formattedResponse);\n    });\n  }\n}\n\nexport default scrape;\n"]},"metadata":{},"sourceType":"module"}